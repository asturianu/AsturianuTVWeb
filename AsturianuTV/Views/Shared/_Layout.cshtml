@using AsturianuTV.Services.Interfaces
@inject IPreloadDataService PreloadDataService
@{
    var preloadedData = await PreloadDataService.PreloadData();
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title> AsturianuTV</title>
    <link href="~/css/header.css" rel="stylesheet" />
    <link href="~/css/footer.css" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <script src="https://kit.fontawesome.com/8a53598006.js" crossorigin="anonymous"></script>
    <link href="~/lib/slick/slick.css" rel="stylesheet" />
    <link href="~/lib/slick/slick-theme.css" rel="stylesheet" />
    <link href="~/lib/resset/resset.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="~/css/main-page.css" rel="stylesheet" />
</head>
<body>
    <header>
        <div class="wrapper">
            <nav class="header-menu">
                <div class="header-menu__links">
                    <a asp-action="Index" asp-controller="Home" class="logo-link"><img src="~/assets/icon-dota.svg"></a>
                    <ul class="header-items">
                        <li class="header-item"><a asp-controller="Home" asp-action="Heroes" class="header-item__link">Base of knowleges</a></li>
                        <li class="header-item"><a asp-controller="Home" asp-action="News" class="header-item__link">News</a></li>
                        <li class="header-item"><a asp-controller="Home" asp-action="Subscriptions" class="header-item__link">Cybersport</a></li>
                    </ul>
                </div>
            </nav>
        </div>
        <nav class="menu" id="theMenu">
            <div class="menu-wrap">
                <h1 class="logo"><a href="">Аккаунт</a></h1>
                <i class="fa fa-arrow-right menu-close"></i>
                @if (preloadedData != null)
                {
                    <p>@preloadedData.Email</p>

                    @if (preloadedData.Role?.Name == "Administrator")
                    {
                        <a asp-controller="Admin"
                           asp-action="Index">Go to settings</a>
                    }

                    if (preloadedData.Subscription != null)
                    {
                        <a asp-controller="Subscription"
                            asp-action="Details"
                            asp-route-id="@preloadedData.Subscription.Id">My subscription</a>
                    }
                    else
                    {
                        <a asp-controller="Subscription"
                            asp-action="Index">
                            Buy a subscription
                        </a>
                    }
                    <a asp-controller="Account" asp-action="Logout">Log out</a>
                }
                else
                {
                    <a asp-controller="Account" asp-action="Login">Login</a>
                    <a asp-controller="Account" asp-action="Register">Registration</a>
                }

                <a href="#"><i class="fa fa-facebook"></i></a>
                <a href="#"><i class="fa fa-twitter"></i></a>
                <a href="#"><i class="fa fa-dribbble"></i></a>
                <a href="#"><i class="fa fa-envelope"></i></a>
            </div>
            <div id="menuToggle"><i class="fa fa-bars"></i></div>
        </nav>

    </header>
    <main>
        @RenderBody()
    </main>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/js/header.js"></script>
    <script src="~/js/footer.js"></script>
    <script src="js/main-page.js"></script>
</body>
</html>